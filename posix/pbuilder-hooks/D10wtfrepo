#!/bin/sh
# $MirOS: contrib/hosted/tg/deb/hookdir/D10wtfrepo,v 1.7 2019/03/23 19:48:13 tg Exp $
#-
# Not complicated enough for copyright.

unset LANGUAGE
LC_ALL=C; export LC_ALL

d=${DIST%/*}
d=${d%-backports*}
case $d in
(sarge|etch|lenny|squeeze|wheezy|jessie|stretch|buster|sid)
	;;
(bullseye)
	d=sid
	;;
(*)
	echo >&2 W: D10wtfrepo: ignoring unknown DIST "'$DIST'"
	exit 0
	;;
esac

# Import 2018 key
apt-key add - <<'EOF'
-----BEGIN PGP PUBLIC KEY BLOCK-----

mQGNBFlP41MBDADGjAsxl0jbdknmg2CHKf7gQPBxOBk5/qw6F5HAOthBM/14sohA
iwXyXW7oEcmPAKc7v8yn+A/JjrCfsp6rXUnMlB37zr5qb0JIO1o3p0guekGGJ/in
48NClFMQU71MmOvaRWIKrNVtFIhLcFncCU9k6bB1hCnhhSmHGBlsIIGhInIHbv4o
5IZYKb0BWJ1SqiOLAwYblstUIcFGR2K+z3l+hwFgMFM0VhMCi0fCyrdEWw9Qs1I1
l0K3hzG2WUOhWO+aY4qoOyPlMc3a9zXBFdc0JHptRgh3JTBf2gK3kO6wcPfdG5Hq
btCstesRFYS9nOoKwyxg80iZYpV4+q6POeS43Xfi2APXB+3tXAQJ5+dCYam/jlzu
oyPAEZxai5R8m1q9SD+c16nx8F5GSuEoAcvfyAc7EqhCfnjh3o2/QokOPPboMRWW
s46FaIWZiuNf8p1hfgj6cjH1ny124AbvvClddCDPuFwwXVxRji3ApeOwPUkqoFDn
zebsA4OA2+ggEGEAEQEAAbQxU2lnbmluZyBrZXkgMjAxOCBmb3Ig4oCcV1RG4oCd
IHBhY2thZ2UgcmVwb3NpdG9yeYkBuwQTAQkAJQUCWU/jUwIbAwUJBqIMAAULCAQJ
BwUVCQoDCAMWAgACHgECF4AACgkQAgir6mZzodkl2AwAlAi4FT+HBrER5ZxtFNdX
nuSLUxMnzqp9k+lO1Kd3i5qGclosdLcrVMCDadzf3ZI1NOQvnzQ9TPlyWD0jBk1E
E0Vg68B7lySoBvJFOoSwZaZs7HCc7EcEFKPK58ITBx4UVXYoW1CLZ4Q51oXT7iSx
RRPby+vMFaeYA1foRffAUFe1pmY3RBuMBxT8NKZIxlC72k10b4y68jMuBBR2UjVV
6YebyHtxMKiGNuJIrhl5hS3p0G1l+KQ6CnBVvqHiECRSE2hsUetg3SO+HbxH2E88
iuPzblqdfsypmIoyia46dAqq97JY6tW9U+CSql4w9Gx4xVj+ai4PNdRv3HImtbEV
L95v4UeZparZmFgJtnUcGe71i8OdqseoRB9+lDLMPShbs06c6eg9RVjMqpbPRXdf
U52L8r+zYDN9mAXKsA1n5mBIZSIG5MVynGkmk0IZFWMZZ5UiTswGJGAAjNyC1eWy
dLtQUGt1ST6gH+fenw0EZ3erzXih9roLsJWip8UweJer
=t3xZ
-----END PGP PUBLIC KEY BLOCK-----
EOF

cat >>/etc/apt/sources.list <<EOF
deb http://www.mirbsd.org/~tg/Debs/ $d wtf
EOF

# note: sarge/wtf almost certainly needs sarge-backports

test x"$d" = x"squeeze" && cat >>/etc/apt/sources.list <<EOF
deb http://www.mirbsd.org/~tg/Debs/ lenny wtf
EOF

apt-get update
apt-get -y --purge dist-upgrade
